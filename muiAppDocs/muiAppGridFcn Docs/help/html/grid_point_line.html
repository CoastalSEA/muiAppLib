
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Points, Lines, Sections and Segments</title><meta name="generator" content="MATLAB 9.13"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2025-02-15"><meta name="DC.source" content="grid_point_line.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Points, Lines, Sections and Segments</h1><!--introduction--><p>A short summary of the conventions used and the functions available, to manipulate points, lines, sections and segments in Grid Tools.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Conventions</a></li><li><a href="#14">Classes</a></li><li><a href="#23">Functions</a></li></ul></div><h2 id="1">Conventions</h2><p>A grid held in any class that inherits <a href="matlab:doc('gdinterface')">GDinterface</a> and obtained from the dstable or using <i>getGrid</i> will return an xyz struct where x and y are column vectors and z is a matrix. The <a href="matlab:doc('grid_class_fcns')">Grid Tools</a> function <i>gd_plotgrid</i> can be used to plot the grid. The <b>GD_Sections</b> class and associated functions make use of the following conventions:</p><div><ul><li><b>Points</b>: a single pair of x,y coordinates or a set of points. Use <i>gd_pnt2vec</i> and gd_vec2pnt to convert between points and other formats.</li></ul></div><p>
<ul><ul>
<li><i>point</i> - a struct with fields x, y (and z) containing the coordinates of a point.</li>
<li><i>points</i> - a row struct array of xy(z) <i>point</i> structs .</li>
</ul></ul>
</p><div><ul><li><b>Lines</b>: a single line with 2 or more points, or a set of lines.</li></ul></div><p>
<ul><ul>
<li><i>line</i> - x, y (and z) column vectors terminated with a Nan.
Can be a matrix, struct or table.</li>
<li><i>lines</i> - x, y (and z) column vectors with line segments defined by NaN terminators.</li>
</ul></ul>
</p><div><ul><li><b>pLines</b>: a set of 2 or more <i>points</i> that define a line.</li></ul></div><p>
<ul><ul>
<li><i>pline</i> - a <i>points</i> array terminated with a NaN <i>point</i>.</li>
<li><i>plines</i> - cell array of <i>pline</i> segments concatenated as a row struct array,
with individual <i>pline</i> segments defined by NaN terminators.</li>
</ul></ul>
</p><div><ul><li><b>Segments</b>: multiple sets of lines held in a single cell array.</li></ul></div><p>
<ul><ul>
<li><i>cplines</i> - a cell array of <i>plines</i> (each of any length and any number of lines).</li>
</ul></ul>
</p><div><ul><li><b>Sections</b>: a special case of a <i>pline</i> with only 2 <i>points</i> (start and end) and a NaN <i>point</i>.</li></ul></div><p>
<ul><ul>
<li><i>pslice</i> - a <i>pline</i> defined by two end <i>points</i>.</li>
<li><i>pslices</i> - multiple <i>pslice</i> segments concatenated as a row struct array,
with individual <i>pslice</i> segments defined by NaN terminators.</li>
</ul></ul>
</p><p>Hence a <i>line</i> and <i>lines</i> are always a set of column vectors in a struct, table or matrix. Whereas the other formats are all different arrays of a <i>point</i> set.</p><p>
<table border=1><tr><td><u><b>Notes</b></u>:<br><br>
<li>To extract a <i>point</i> from <i>points</i> use: &emsp; point = points(i);</li><br>
<li>To extract the ith <i>pline</i> of points from a <i>plines</i>
use:</li><br>
&emsp; &emsp; idN = [0,find(isnan([points(:).x]))];<br>
&emsp; &emsp;   for i=1:length(idN)-1<br>
&emsp; &emsp; &emsp; pline{1,i} = points(idN(i)+1:idN(i+1));<br>
&emsp; &emsp;   end<br><br>
<li>To switch between plines and cplines use <i>gd_plines2cplines</i>and <i>gd_cplines2plines</i>;</li><br>
<li>To switch between point, or points, and line, or lines, use
<i>gd_points2lines</i> and <i>gd_lines2points</i>.</li><br>
<li>When using lines, some functions use row vectors and others use
column vectors. <br>&emsp; To switch an xy struct from column to row or vice versa use:<br>
 &emsp; &emsp; lines = structfun(@transpose,lines,'UniformOutput',false); <br><br>
</td></tr></table>
</p><h2 id="14">Classes</h2><p>The Apps that inherit <a href="matlab:doc('gdinterface')">GDinterface</a> can make use of <b>GD_Sections</b> to manipulate points and lines, and extract boundaries and cente-lines from an imported digital terrain model. This extends the capability of the functions provided as part of the standard <a href="matlab:doc('grid_menu_help')">Grid tools Menu</a>.</p><p><b>GD_Sections</b>: provides methods to manipulate points, lines and sections using datasets in classes that inherit <a href="matlab:doc('gdinterface')">GDinterface</a>.</p><p>Properties for sections:</p><div><ul><li><i>Boundary</i> - enclosing boundary used to crop length of sections.</li><li><i>ChannelLine</i> - centre-line of channel can be multiple lines to define a network.</li><li><i>ChannelProps</i> - properties used when extracting the channel network.</li><li><i>SectionLines</i> - sections defined at right angles to points on centre-line extending to Boundaray line (if cropping applied).</li></ul></div><p>All properties are held as <i>lines</i> and the GD_Sections instance is saved to the Sections property in the calling class (e.g. EDBimport).</p><p>Methods to manipulate sections:</p><div><ul><li>setBoundary - load a grid and interactively define a boundary line with options to autogenerate and edit or digistise the line.</li><li>setChannelNetwork - load a grid and extract the centre lines of the channels in a network, or digitise them manually, and combine into a vector of points.</li><li>setSectionLines - use the centre-line to generate a set of sections at right angles and interactively edit them, or digitise them manually.</li><li>setSections - using the SectionLines data extract the widths as a function of elevation and distance along the centre-line.</li><li>viewsections - view boundary channel network and cross-sections line work.</li></ul></div><p>Static methods to manipulate sections:</p><div><ul><li>editLines - edit linework for selected line type (can be Boundary, Channel Network or Section Lines).</li><li>loadLines -  load linework for selected line type from a shapefile.</li><li>getSection - retrieve existing class object or create a new instance.</li><li>sectionMenuOptions - default set of menu options for use in Model UIs such as EstuaryDB. Can be used to call any of the methods listed above</li></ul></div><h2 id="23">Functions</h2><p>Functions that derive and manipulte sections from a Grid such as contour boundaries, channel centre-lines can be found in the <i>muiAppGridFcns</i> folder. Use the Matlab&#8482; <i>help</i> function in the command window to get further details of each function.</p><p><b>gd_boundary.m</b> - UI to interactively generate a contour line (e.g. to define a boundary).</p><pre class="language-matlab">blines = gd_boundary(grid,paneltxt,outype,isdel);
</pre><p>where <i>grid</i> is a struct of x, y, z, <i>paneltext</i> is a character string used for title, <i>outype</i> is the format of output (see <b>gd_pnt2vec</b>), <i>inlines</i> is struct or table of x,y vectors to be edited, or the format of output if no lines are being input, and <i>isdel</i> is a logical flag true to delete figure on completion (optional - default is false). The output, <i>blines</i>, contains <i>lines</i> of the extracted contour.</p><p><b>gd_centreline</b> - create a centreline of a channel to trace the shortest path between start and end points whilst finding the deepest points (i.e. a thalweg).</p><pre class="language-matlab">cline = gd_centreline(grid,mobj,props,clines);
</pre><p>where <i>grid</i> is a struct of x, y, z, <i>mobj</i> is a muitoolbox model instance, <i>props</i> is a struct for maximum water level and depth exponent (maxwl and dexp), <i>clines</i> is optional and passes any previously defined centre-lines. The output, <i>cline</i>, is a <i>line</i> of the extracted centre-line.</p><p><b>gd_cplines2plines.m</b> - convert cell array of plines to an array of points that define plines.</p><pre class="language-matlab">plines = gd_cplines2plines(cplines);
</pre><p>where <i>cplines</i> is a cell array of plines and <i>plines</i> is a struct array with x and y fields defining a set of points.</p><p><b>gd_digitisepoints.m</b> - UI to interactively digitise x,y,z points on a grid and edit z elevations, if required</p><pre class="language-matlab">lines = gd_digitisepoints(grid,paneltxt,outype,isxyz,isdel)
</pre><p>where <i>grid</i> is a struct of x, y, z, <i>paneltext</i> is a character string used for title, <i>outype</i> is the format of output (see <b>gd_pnt2vec</b>), <i>isxyz</i> is a logical flag true to input z values (optional, default is false) and <i>isdel</i> - logical flag true to delete figure on completion (optional - default is false). Output is a <i>lines</i>, or <i>plines</i> array, depending on <i>outype</i>.</p><p><b>gd_editlines.m</b> - UI to interactively digitise x,y,z points on a grid and edit z elevations, if required</p><pre class="language-matlab">lines = gd_editlines(grid,paneltxt,inlines,isdel);
</pre><p>where <i>grid</i> is a struct of x, y, z, <i>paneltext</i> is a character string used for title, <i>outype</i> is the format of output (see <b>gd_pnt2vec</b>), <i>inlines</i> is struct or table of x,y vectors to be edited, or the format of output if no lines are being input, and <i>isdel</i> is a logical flag true to delete figure on completion (optional - default is false). Output is a <i>lines</i>, or <i>plines</i> array, depending on <i>outype</i>.</p><p><b>gd_findline.m</b> - find which <i>pline</i> a given <i>point</i> lies on when there are multiple lines separated by NaN values in a <i>plines</i> struct array.</p><pre class="language-matlab">lineIndex = gd_findline(plines,queryPoint);
</pre><p>where <i>plines</i> - is a struct array of x,y points defining lines and each line is separated by a NaN x,y <i>point</i>, and <i>queryPoint</i> is an x,y struct of the <i>point</i> to be tested. The output <i>lineIndex</i> is an index to the line in <i>plines</i> on which the query <i>point</i> lies.</p><p><b>gd_getcontour.m</b> - extract a contour at a defined level.</p><pre>clines = gd_getcontour(grid,zlevel)</pre><p>where <i>grid</i> - struct of x, y, z, <i>zlevel</i> is the level of contour to be extracted and <i>isplt</i> is a logical flag true to create plot (optional, default is false). The output, <i>clines</i>, is a set of <i>lines</i> of the extracted contour.</p><p><b>gd_getpoint.m</b> - interactively select a single point in a UI figure and return the point coordinates.</p><pre class="language-matlab">point = gd_getpoint(ax,promptxt)
</pre><p>where <i>ax</i> is a figure axes used to interactively select point, and <i>promptxt</i> is a prompt to be used for point being selected. The output is a <i>point</i> struct.</p><p><b>gd_orderplines.m</b> - amend the order of the <i>plines</i> in an array of <i>plines</i></p><pre class="language-matlab">plines = gd_orderlines(ax,plines);
</pre><p>where <i>ax</i> is the figure axes being used to edit points and <i>plines</i> is a struct of x,y vectors defining one or more lines. The output is a copy of <i>plines</i> in the revised order.</p><p><b>gd_plines2cplines.m</b> - convert an array of plines to a cell array of plines</p><pre class="language-matlab">cplines = gd_plines2cplines(plines);
</pre><p>where <i>plines</i> is a struct array with x and y fields defining one or more plines, and <i>cplines</i> is a cell array of plines.</p><p><b>gd_plotgrid</b> - create pcolor plot of gridded surface (from Grid Tools).</p><pre class="language-matlab">ax = gd_plotgrid(hfig,grid);  <span class="comment">%hfig is figure handle and ax is axes handle</span>
</pre><p><b>gd_plotsections</b> - display grid and allow user to interactively define start and end points of a section line to be plotted in a figure (from Grid Tools).</p><pre class="language-matlab">gd_plotsections(grid);  <span class="comment">%where grid is a struct of x, y, z</span>
</pre><p><b>gd_points2lines.m</b> - convert a <i>lines</i> array of structs with x, y (and z) fields to a [Nx2] or [Nx3] array, or a single stuct with column vectors in the x, y (and z) fields</p><pre class="language-matlab">lines = gd_points2lines(points,outype);
</pre><p>where <i>outype</i> determines the format of the output, <i>lines</i> as follows:</p><p>
<ul><ul>
<li>outype=0: array of structs with x, y (and z) fields defining _points_.</li>
<li>outype=1: [Nx2] or [Nx3] array.</li>
<li>outype=2: struct with x, y (and z) column vectors</li>
<li>outype=3: table with x, y (and z) column vectors.</li>
</ul></ul>
</p><p><b>gd_sectionlines.m</b> -extract the section lines that are normal to the channel centre line and extend to the bounding shoreline.</p><pre class="language-matlab">[s_lines,c_lines] = gd_sectionlines(obj,cobj,paneltxt,isdel);
</pre><p>where <i>obj</i> is an instance of GD_Sections with a Boundary and ChannelLine defined and <i>cobj</i> is an instance of EDBimport class with grid or geoimage <i>paneltext</i> is a character string used for title, <i>outype</i> is the format of output (see <b>gd_pnt2vec</b>), and <i>isdel</i> is a logical flag true to delete figure on completion (optional - default is false). The output, <i>s_lines</i> and <i>c_lines</i>, sets of <i>lines</i> of the extracted sections and centreline (can be smoothed as part of workflow).</p><p><b>gd_selectpoints.m</b> - UI to interactively create a specified number of x,y point on a grid.</p><pre class="language-matlab">points = gd_selectpoints(grid,paneltxt,promptxt,inlines;npts,outype,isdel);
</pre><p>where <i>grid</i> is a struct of x, y, z, <i>paneltext</i> is a character string used for title, <i>promptxt</i> is a cell array of prompts to be used for each point being defined (if a single cell the text is apended with a count  for each point, othewise the cell array should have a length of npts), <i>inlines</i> - struct, table or matrix of x,y column vectors to show on base plot, <i>npts</i> is the number of points to be selected, <i>outype</i> - format of output (see <b>gd_pnt2vec</b>) and <i>isdel</i> - logical flag true to delete figure on completion (optional - default is false). Output is a <i>points</i> array.</p><p><b>gd_setcplines.m</b> - %   converts a set of points to a set of <i>plines</i> based on NaN separators, plots the graphical lines, or digistise a set of points and return as a <i>pline</i>.</p><pre class="language-matlab">cplines = gd_setcplines(ax,promptxt,linepoints);
</pre><p>where <i>ax</i> is a figure axes used to interactivly select points, <i>promptxt</i> is a prompt to be used for point being defined, and <i>linepoints</i> is a set of <i>points</i> to be set as lines x,y struct with each line define by a NaN separator (optional - user prompted to define points if not set) cplines - a cell array of <i>plines</i>, or anew digitised <i>pline</i>.</p><p><b>gd_setpoint.m</b> - interactively create a single point in a UI figure and return the point coordinates. Includes an option to enter an additional value at the selected point (e.g. elevation).</p><pre class="language-matlab">point = gd_setpoint(ax,promptxt,isxyz)
</pre><p>where <i>ax</i> is a figure axes used to interactively select points, <i>promptxt</i> is a prompt to be used for point being defined, and <i>isxyz</i> is a logical flag true to input z values (optional, default is false). The output is a <i>point</i> struct.</p><p><b>gd_setpoints.m</b> - interactively create a set of points in a UI figure and return the point coordinates. Includes an option to enter an additional value at the selected points (e.g. elevation).</p><pre class="language-matlab">points = gd_setpoints(ax,promptxt,isxyz);
</pre><p>where <i>ax</i> is a figure axes used to interactively select points, <i>promptxt</i> is a prompt to be used for point being defined, and <i>isxyz</i> is a logical flag true to input z values (optional, default is false). The output is a <i>points</i> array.</p><p><b>gd_smoothlines.m</b> - smooth one or more line segments using either moving average, or the Savitzky-Golay method.</p><pre class="language-matlab">smoothlines = gd_smoothlines(lines,method,win,deg,npnts)
</pre><p>where <i>lines</i> is a struct of x,y vectors to be smoothed, with each line segment separated by a NaN, <i>method</i> can be 'movmean' for moving average, or 'sgolay' for Savitzky-Golay smoothing, <i>window</i> is the size of window to use (1 or 2 elements), <i>degree</i> is the  Savitzky-Golay degree (&lt;window) and <i>npnts</i> is the minimum number of points required to apply smoothing</p><p><b>gd_lines2points.m</b> convert <i>lines</i>  as x,y vectors in various formats (see <b>gd_pnt2vec</b>) to a <i>points</i> array of structs for each <i>point</i> with x, y (and z) fields.</p><pre class="language-matlab">[points,outype] = gd_lines2points(lines);
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2022b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Points, Lines, Sections and Segments
% A short summary of the conventions used and the functions available, to
% manipulate points, lines, sections and segments in Grid Tools.

%% Conventions
% A grid held in any class that inherits <matlab:doc('gdinterface') GDinterface> 
% and obtained from the dstable or using _getGrid_ will return an xyz
% struct where x and y are column vectors and z is a matrix. The 
% <matlab:doc('grid_class_fcns') Grid Tools> function _gd_plotgrid_ can 
% be used to plot the grid. The *GD_Sections* class and associated functions
% make use of the following conventions:
%%
% * *Points*: a single pair of x,y coordinates or a set of points. Use
% _gd_pnt2vec_ and gd_vec2pnt to convert between points and other formats.
%%
% <html>
% <ul><ul>
% <li><i>point</i> - a struct with fields x, y (and z) containing the coordinates of a point.</li>
% <li><i>points</i> - a row struct array of xy(z) <i>point</i> structs .</li>
% </ul></ul>
% </html>

%%
% * *Lines*: a single line with 2 or more points, or a set of lines.
%%
% <html>
% <ul><ul>
% <li><i>line</i> - x, y (and z) column vectors terminated with a Nan. 
% Can be a matrix, struct or table.</li>
% <li><i>lines</i> - x, y (and z) column vectors with line segments defined by NaN terminators.</li>
% </ul></ul>
% </html>

%%
% * *pLines*: a set of 2 or more _points_ that define a line.
%%
% <html>
% <ul><ul>
% <li><i>pline</i> - a <i>points</i> array terminated with a NaN <i>point</i>.</li>
% <li><i>plines</i> - cell array of <i>pline</i> segments concatenated as a row struct array, 
% with individual <i>pline</i> segments defined by NaN terminators.</li>
% </ul></ul>
% </html>

%%
% * *Segments*: multiple sets of lines held in a single cell array.
%%
% <html>
% <ul><ul>
% <li><i>cplines</i> - a cell array of <i>plines</i> (each of any length and any number of lines).</li>
% </ul></ul>
% </html>

%%
% * *Sections*: a special case of a _pline_ with only 2 _points_ (start and
% end) and a NaN _point_.
%%
% <html>
% <ul><ul>
% <li><i>pslice</i> - a <i>pline</i> defined by two end <i>points</i>.</li>
% <li><i>pslices</i> - multiple <i>pslice</i> segments concatenated as a row struct array, 
% with individual <i>pslice</i> segments defined by NaN terminators.</li>
% </ul></ul>
% </html>

%%
% Hence a _line_ and _lines_ are always a set of column vectors in a struct,
% table or matrix. Whereas the other formats are all different arrays of a _point_ set.

%%
% <html>
% <table border=1><tr><td><u><b>Notes</b></u>:<br><br>
% <li>To extract a <i>point</i> from <i>points</i> use: &emsp; point = points(i);</li><br>
% <li>To extract the ith <i>pline</i> of points from a <i>plines</i>
% use:</li><br>
% &emsp; &emsp; idN = [0,find(isnan([points(:).x]))];<br>
% &emsp; &emsp;   for i=1:length(idN)-1<br>
% &emsp; &emsp; &emsp; pline{1,i} = points(idN(i)+1:idN(i+1));<br>
% &emsp; &emsp;   end<br><br>
% <li>To switch between plines and cplines use <i>gd_plines2cplines</i>and <i>gd_cplines2plines</i>;</li><br>
% <li>To switch between point, or points, and line, or lines, use
% <i>gd_points2lines</i> and <i>gd_lines2points</i>.</li><br>
% <li>When using lines, some functions use row vectors and others use
% column vectors. <br>&emsp; To switch an xy struct from column to row or vice versa use:<br>
%  &emsp; &emsp; lines = structfun(@transpose,lines,'UniformOutput',false); <br><br>
% </td></tr></table>
% </html>

%% Classes
% The Apps that inherit <matlab:doc('gdinterface') GDinterface> can make use of 
% *GD_Sections* to manipulate points and lines, and extract boundaries and
% cente-lines from an imported digital terrain model. This extends the
% capability of the functions provided as part of the standard
% <matlab:doc('grid_menu_help') Grid tools Menu>. 

%%
% *GD_Sections*: provides methods to manipulate points, lines and sections 
% using datasets in classes that inherit <matlab:doc('gdinterface') GDinterface>.

%%
% Properties for sections:
%%
% * _Boundary_ - enclosing boundary used to crop length of sections.
% * _ChannelLine_ - centre-line of channel can be multiple lines to define
% a network.
% * _ChannelProps_ - properties used when extracting the channel network.
% * _SectionLines_ - sections defined at right angles to points on
% centre-line extending to Boundaray line (if cropping applied).
%%
% All properties are held as _lines_ and the GD_Sections instance is saved 
% to the Sections property in the calling class (e.g. EDBimport).

%%
% Methods to manipulate sections:
%% 
% * setBoundary - load a grid and interactively define a boundary line with
% options to autogenerate and edit or digistise the line.
% * setChannelNetwork - load a grid and extract the centre lines of the channels in
% a network, or digitise them manually, and combine into a vector of points.
% * setSectionLines - use the centre-line to generate a set of sections at right
% angles and interactively edit them, or digitise them manually.
% * setSections - using the SectionLines data extract the widths as
% a function of elevation and distance along the centre-line.
% * viewsections - view boundary channel network and cross-sections line work.

%%
% Static methods to manipulate sections:
%%
% * editLines - edit linework for selected line type (can be Boundary,
% Channel Network or Section Lines).
% * loadLines -  load linework for selected line type from a shapefile.
% * getSection - retrieve existing class object or create a new instance.
% * sectionMenuOptions - default set of menu options for use in Model UIs
% such as EstuaryDB. Can be used to call any of the methods listed above


%% Functions
% Functions that derive and manipulte sections from a Grid 
% such as contour boundaries, channel centre-lines can be found in the _muiAppGridFcns_ 
% folder. Use the Matlab(TM) _help_ function in the command window to get 
% further details of each function.

%%
% *gd_boundary.m*
% - UI to interactively generate a contour line (e.g. to define a boundary).
%%
%   blines = gd_boundary(grid,paneltxt,outype,isdel);
%%
% where _grid_ is a struct of x, y, z, _paneltext_ is a character string
% used for title, _outype_ is the format of output (see *gd_pnt2vec*), _inlines_
% is struct or table of x,y vectors to be edited, or the format 
% of output if no lines are being input, and _isdel_ is a logical flag true to delete figure 
% on completion (optional - default is false). The output, _blines_, 
% contains _lines_ of the extracted contour.

%%
% *gd_centreline* - create a centreline of a channel to trace the
% shortest path between start and end points whilst finding the deepest
% points (i.e. a thalweg).
%%
%   cline = gd_centreline(grid,mobj,props,clines);
%
%%
% where _grid_ is a struct of x, y, z, _mobj_ is a muitoolbox
% model instance, _props_ is a struct for maximum water level and depth exponent 
% (maxwl and dexp), _clines_ is optional and passes any previously defined
% centre-lines. The output, _cline_, is a _line_ of the extracted centre-line.

%%
% *gd_cplines2plines.m*
% - convert cell array of plines to an array of points that define plines.
%%
%   plines = gd_cplines2plines(cplines);
%%
% where _cplines_ is a cell array of plines and _plines_ is a struct array 
% with x and y fields defining a set of points.

%%
% *gd_digitisepoints.m*
% - UI to interactively digitise x,y,z points on a grid and edit
% z elevations, if required
%%
%   lines = gd_digitisepoints(grid,paneltxt,outype,isxyz,isdel)
%%
% where _grid_ is a struct of x, y, z, _paneltext_ is a character string
% used for title, _outype_ is the format of output (see *gd_pnt2vec*), _isxyz_
% is a logical flag true to input z values (optional, default is false)
% and _isdel_ - logical flag true to delete figure 
% on completion (optional - default is false). Output is a _lines_, or 
% _plines_ array, depending on _outype_.

%%
% *gd_editlines.m*
% - UI to interactively digitise x,y,z points on a grid and edit
% z elevations, if required
%%
%   lines = gd_editlines(grid,paneltxt,inlines,isdel);
%%
% where _grid_ is a struct of x, y, z, _paneltext_ is a character string
% used for title, _outype_ is the format of output (see *gd_pnt2vec*), _inlines_
% is struct or table of x,y vectors to be edited, or the format 
% of output if no lines are being input, and _isdel_ is a logical flag true to delete figure 
% on completion (optional - default is false). Output is a _lines_, or 
% _plines_ array, depending on _outype_.

%%
% *gd_findline.m*
% - find which _pline_ a given _point_ lies on when there are multiple lines
% separated by NaN values in a _plines_ struct array.
%%
%   lineIndex = gd_findline(plines,queryPoint);
%%
% where _plines_ - is a struct array of x,y points defining lines and each line is 
% separated by a NaN x,y _point_, and _queryPoint_ is an x,y struct of the
% _point_ to be tested. The output _lineIndex_ is an index to the line in
% _plines_ on which the query _point_ lies.

%%
% *gd_getcontour.m*
% - extract a contour at a defined level.
%%
%  clines = gd_getcontour(grid,zlevel)
%%
% where _grid_ - struct of x, y, z, _zlevel_ is the level of contour to be extracted
% and _isplt_ is a logical flag true to create plot (optional, default is
% false). The output, _clines_, is a set of _lines_ of the extracted contour.

%%
% *gd_getpoint.m*
% - interactively select a single point in a UI figure and return the point
% coordinates.
%%
%   point = gd_getpoint(ax,promptxt)
%%
% where _ax_ is a figure axes used to interactively select point, and _promptxt_
% is a prompt to be used for point being selected. The output is a _point_ struct.

%%
% *gd_orderplines.m*
% - amend the order of the _plines_ in an array of _plines_
%%
%   plines = gd_orderlines(ax,plines);
%%
% where _ax_ is the figure axes being used to edit points and _plines_ is 
% a struct of x,y vectors defining one or more lines. The output is a copy
% of _plines_ in the revised order.

%%
% *gd_plines2cplines.m*
% - convert an array of plines to a cell array of plines
%%
%   cplines = gd_plines2cplines(plines);
%%
% where _plines_ is a struct array with x and y fields defining one or more
% plines, and _cplines_ is a cell array of plines.

%%
% *gd_plotgrid*
% - create pcolor plot of gridded surface (from Grid Tools).
%%
%   ax = gd_plotgrid(hfig,grid);  %hfig is figure handle and ax is axes handle

%%
% *gd_plotsections*
% - display grid and allow user to interactively define start and
% end points of a section line to be plotted in a figure (from Grid Tools).
%%
%   gd_plotsections(grid);  %where grid is a struct of x, y, z

%%
% *gd_points2lines.m*
% - convert a _lines_ array of structs with x, y (and z) fields to a [Nx2] or [Nx3] 
% array, or a single stuct with column vectors in the x, y (and z) fields
%%
%   lines = gd_points2lines(points,outype);
%%
% where _outype_ determines the format of the output, _lines_ as follows:
%%
% <html>
% <ul><ul>
% <li>outype=0: array of structs with x, y (and z) fields defining _points_.</li>
% <li>outype=1: [Nx2] or [Nx3] array.</li>
% <li>outype=2: struct with x, y (and z) column vectors</li>
% <li>outype=3: table with x, y (and z) column vectors.</li>
% </ul></ul>
% </html>

%%
% *gd_sectionlines.m*
% -extract the section lines that are normal to the channel centre line
% and extend to the bounding shoreline.
%%
%   [s_lines,c_lines] = gd_sectionlines(obj,cobj,paneltxt,isdel);
%%
% where _obj_ is an instance of GD_Sections with a Boundary and ChannelLine 
% defined and _cobj_ is an instance of EDBimport class with grid or geoimage
% _paneltext_ is a character string used for title, _outype_ is the format
% of output (see *gd_pnt2vec*), and _isdel_ is a logical flag true to delete figure 
% on completion (optional - default is false). The output, _s_lines_ and 
% _c_lines_, sets of _lines_ of the extracted sections and centreline (can
% be smoothed as part of workflow).

%%
% *gd_selectpoints.m*
% - UI to interactively create a specified number of x,y point on a grid.
%%
%   points = gd_selectpoints(grid,paneltxt,promptxt,inlines;npts,outype,isdel);
%%
% where _grid_ is a struct of x, y, z, _paneltext_ is a character string
% used for title, _promptxt_ is a cell array of prompts to be used for each 
% point being defined (if a single cell the text is apended with a count
%  for each point, othewise the cell array should have a length of npts),
% _inlines_ - struct, table or matrix of x,y column vectors to show on base
% plot, _npts_ is the number of points to be selected, _outype_ - format of 
% output (see *gd_pnt2vec*) and _isdel_ - logical flag true to delete figure 
% on completion (optional - default is false). Output is a _points_ array.

%%
% *gd_setcplines.m*
% - %   converts a set of points to a set of _plines_ based on NaN separators,
% plots the graphical lines, or digistise a set of points and return as a
% _pline_.
%%
%   cplines = gd_setcplines(ax,promptxt,linepoints);
%%
% where _ax_ is a figure axes used to interactivly select points, _promptxt_
% is a prompt to be used for point being defined, and _linepoints_ is a
% set of _points_ to be set as lines x,y struct with each line
% define by a NaN separator (optional - user prompted to define points if not set)
% cplines - a cell array of _plines_, or anew digitised _pline_.

%%
% *gd_setpoint.m*
% - interactively create a single point in a UI figure and return the point
% coordinates. Includes an option to enter an additional value at the
% selected point (e.g. elevation).
%%
%   point = gd_setpoint(ax,promptxt,isxyz)
%%
% where _ax_ is a figure axes used to interactively select points, _promptxt_
% is a prompt to be used for point being defined, and _isxyz_
% is a logical flag true to input z values (optional, default is false).
% The output is a _point_ struct.

%%
% *gd_setpoints.m*
% - interactively create a set of points in a UI figure and return the point
% coordinates. Includes an option to enter an additional value at the
% selected points (e.g. elevation).
%%
%   points = gd_setpoints(ax,promptxt,isxyz);
%%
% where _ax_ is a figure axes used to interactively select points, _promptxt_
% is a prompt to be used for point being defined, and _isxyz_
% is a logical flag true to input z values (optional, default is false).
% The output is a _points_ array.


%%
% *gd_smoothlines.m*
% - smooth one or more line segments using either moving average, or the
% Savitzky-Golay method.
%%
%   smoothlines = gd_smoothlines(lines,method,win,deg,npnts)
%%
% where _lines_ is a struct of x,y vectors to be smoothed, with each line
% segment separated by a NaN, _method_ can be 'movmean' for moving average,
% or 'sgolay' for Savitzky-Golay smoothing, _window_ is the size of window 
% to use (1 or 2 elements), _degree_ is the  Savitzky-Golay degree
% (<window) and _npnts_ is the minimum number of points required to apply smoothing

%%
% *gd_lines2points.m*
% convert _lines_  as x,y vectors in various formats (see *gd_pnt2vec*) to a 
% _points_ array of structs for each _point_ with x, y (and z) fields.
%%
%   [points,outype] = gd_lines2points(lines);



















##### SOURCE END #####
--></body></html>